!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){var d={ObjectStore:c(1),CouchStore:c(2),PostStore:c(3),LocalStore:c(4)};window.JEFRi.Stores=a.exports=d},function(a,b,c){var d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;f=c(5),d=c(6),e=function(a){function b(a){if(this.settings={version:"1.0",size:Math.pow(2,16)},Object.assign(this.settings,a),this._store={},!this.settings.runtime)throw{message:"LocalStore instantiated without runtime to reference."}}var c,e;return g(b,a),b.prototype._set=function(a,b){return this._store[a]=b},b.prototype._get=function(a){return this._store[a]||"{}"},b.prototype.execute=function(a,b){var c;return b=e(b),this.emit("sending",b),this["do_"+a](b),this.settings.runtime.expand(b),c=f.promise.defer(),c.resolve(b),c.promise},b.prototype.get=function(a){return this.execute("get",a)},b.prototype.persist=function(a){return this.execute("persist",a)},b.prototype.do_persist=function(a){var b;return a.entities=function(){var c,d,e,f;for(e=a.entities,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(this._save(b));return f}.call(this)},b.prototype._save=function(a){return a=Object.assign(this._find(a),a),this._set(this._key(a),JSON.stringify(a)),this._type(a._type,a._id),a},b.prototype.do_get=function(a){var b,c,d,e,f,g,h,i,j;for(c={},h=a.entities,f=0,g=h.length;g>f;f++)b=h[f],d=this._lookup(b),(j=function(a){var b,d,e,f,g,h,i;if(a){if(a.hasOwnProperty("_type"))return c[a._id]=a;if(Array.isArray(a)){for(h=[],f=0,e=a.length;e>f;f++)g=a[f],h.push(j(g));return h}i=[];for(d in a)b=a[d],i.push(j(b));return i}})(d);return a.entities=function(){var a;a=[];for(e in c)i=c[e],a.push(i);return a}(),a},b.prototype._find=function(a){return JSON.parse(this._get(this._key(a)))},b.prototype._lookup=function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;for(b=this.settings.runtime.definition(a._type),w=[],r=Object.keys(this._type(a._type)),j=0,k=r.length;k>j;j++)h=r[j],w.push(JSON.parse(this._get(this._key(a,h))));if(0!==w.length){b.key in a&&(w=w.filter(function(c){return c._id===a[b.key]})),s=b.properties;for(p in s)q=s[p],p in a&&p!==b.key&&(w=w.filter(c(p,q,a[p])));t=b.relationships;for(p in t)if(v=t[p],p in a){for(f=[],x=[],n=0,l=w.length;l>n;n++)e=w[n],u=function(c){return function(){var d;return"list"===b.properties[v.property].type?e[v.property].map(function(a){var b;return b={_type:v.to.type},b[v.to.property]=a,c._lookup(b)}).filter(function(a){return a.length>0}).reduce(function(a,b){return a.concat(b)},[]):(d=Object.assign({},a[p],{_type:v.to.type}),d[v.to.property]=e[v.property],c._lookup(d))}}(this)(),u.length&&f.push(u);for(x.reverse(),o=0,m=x.length;m>o;o++)g=x[o],i=g+1,d=w[i(til(w.length))],w=w.slice(0,+g+1||9e9),[].push.apply(w,d);[].push.apply(w,f)}return w}},b.prototype._type=function(a,b){var c;return null==b&&(b=null),c=JSON.parse(this._get(a)||"{}"),b&&(c[b]="",this._set(a,JSON.stringify(c))),c},b.prototype._key=function(a,b){var c;return null==b&&(b=a._id),c=a._type,c+"/"+b},c=function(a,b,d){var e,f;if(Object.isNumber(d)&&(d=d%1===0?["=",d]:[d,8]),Object.isString(d)&&(d=["REGEX",".*"+d+".*"]),d||(d=["=",void 0]),!Array.isArray(d))throw{message:"Lookup specification is invalid (in LocalStore::_sieve).",name:a,property:b,spec:d};if(Object.isNumber(d[0]))return function(b){return Math.abs(b[a]-d[0])<Math.pow(2,-d[1])};if(Array.isArray(d[0]))return d[e]=function(){var g,h,i;for(i=[],e=g=0,h=d.length;h>g;e=++g)f=d[e],i.push(c(a,b,d[e]));return i}(),function(a){var b,c,e;for(c=0,e=d.length;e>c;c++)if(b=d[c],!b(a))return!1;return!0};switch(d[0]){case"=":return function(b){return b[a]===d[1]};case"<=":return function(b){return b[a]<=d[1]};case">=":return function(b){return b[a]>=d[1]};case"<":return function(b){return b[a]<d[1]};case">":return function(b){return b[a]>d[1]};case"REGEX":return function(b){return(""+b[a]).match(d[1])};default:return function(b){for(var c;c=d.shift;)if(b[a]===c)return!0;return!1}}},e=function(a){return Function.isFunction(a.encode)||(a=new d.Transaction(a)),a.encode()},b}(f.Event),a.exports=e},function(){var a,b;b=this,b.JEFRi=b.JEFRi?b.JEFRi:{},a=function(){function a(a){if(this.settings={version:"1.0",size:Math.pow(2,16)},_.extend(this.settings,a),!this.settings.runtime)throw{message:"CouchStore instantiated without runtime to reference."}}return a.prototype.execute=function(a,b){var c,d;return d=JSON.parse(b.toString()),_(this).trigger("sending",[a,"couchStorage:",d,this]),"persist"===a?c=this.persist(b):"get"===a&&(c=this.get(b)),c.resolve({}).promise()},a.prototype.persist=function(){return _.Deferred()},a.prototype.get=function(){return _.Deferred()},a}(),b.JEFRi.CouchStore=a},function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}};g=c(5),f=g.request,e=g.promise,a.exports=d=function(){function a(a){if(this._send=h(this._send,this),this.settings={version:"1.0",size:Math.pow(2,16)},Object.assign(this.settings,a),!this.settings.runtime)throw{message:"LocalStore instantiated without runtime to reference."};this.settings.remote?Object.assign(this,{get:function(a){var b;return b=this.settings.remote+"get",this._send(b,a,"getting","gotten")},persist:function(a){var b;return b=this.settings.remote+"persist",this._send(b,a,"persisting","persisted")}}):this.get=this.persist=function(a){var b;return a.entities=[],b=e(),b(!0,a),b}}return a.prototype._send=function(a,b){return f.post(a,{data:b.toString(),dataType:"application/json"}).then(function(a){return function(b){return Object.isString(b)&&(b=JSON.parse(b)),a.settings.runtime.expand(b),b}}(this))},a}(),Object.assign(d.prototype,{execute:function(a,b){return this[a](b)}})},function(a,b,c){var d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=c(1),d=function(a){function b(a){b.__super__.constructor.call(this,a)}return f(b,a),b.prototype._set=function(a,b){return localStorage[a]=b},b.prototype._get=function(a){return localStorage[a]||"{}"},b.prototype._key=function(a,c){return null==c&&(c=a._id),b.__super__._key.call(this,a,c).replace("/",".")},b}(e),a.exports=d},function(a,b,c){c(7),a.exports={Event:c(8),lock:c(9),promise:c(10),request:c(15),UUID:c(11)},"object"==typeof window&&null!==window&&(window.jiffies=a.exports)},function(a,b,c){var d=c(12);d.Runtime=c(13),d.Transaction=c(14),a.exports=d,"undefined"!=typeof window&&null!==window&&(window.JEFRi=a.exports)},function(){[].includes||(Array.prototype.includes=function(a){"use strict";var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d,e=parseInt(arguments[1])||0;e>=0?d=e:(d=c+e,0>d&&(d=0));for(var f;c>d;){if(f=b[d],a===f||a!==a&&f!==f)return!0;d++}return!1}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a){"use strict";if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e=Object.keys(Object(d)),f=0,g=e.length;g>f;f++){var h=e[f],i=Object.getOwnPropertyDescriptor(d,h);void 0!==i&&i.enumerable&&(b[h]=d[h])}}return b}}),Object.isString||(Object.isString=function(a){return"string"==typeof a}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Function.isFunction||(Function.isFunction=function(a){return"function"==typeof a}),Object.isObject||(Object.isObject=function(a){return"object"==typeof a&&null!==a||!1}),Object.isNumber||(Object.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)})},function(a,b,c){a.exports=c(18).EventEmitter},function(a){a.exports=function(a){return function(){var b,c;if(!a.__locked){a.__locked=!0;try{b=a.apply(this,arguments)}catch(d){c=d}}if(a.__locked=!1,c)throw c;return b}}},function(a,b,c){var d=c(19);d.prototype["finally"]=function(a){return this.then(a,a)},d.prototype.done=function(){},d.defer=function(){var a,b,c=new d(function(c,d){a=c,b=d});return{promise:c,resolve:a,reject:b}},a.exports=d},function(a,b,c){var d={};a.exports=d,d.rvalid=/^\{?[0-9a-f]{8}\-?[0-9a-f]{4}\-?[0-9a-f]{4}\-?[0-9a-f]{4}\-?[0-9a-f]{12}\}?$/i;var e=c(16);d.v4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=15&e(1),c="x"===a?b:3&b|8;return c.toString(16)})}},function(a){a.exports={EntityComparator:function(a,b){var c;return c=a&&b&&a._type()===b._type()&&a.id()===b.id()},isEntity:function(a){return null==a&&(a={}),a._type&&a.id&&Function.isFunction(a._type)&&Function.isFunction(a.id)||!1}}},function(a,b,c){var d,e,f,g,h,i,j,k,l=[].slice;f=c(12),i=c(5),e=i.Event,g=i.promise,h=i.UUID,j=i.lock,d=c(17),a.exports=f.Runtime=function(a,b,c){var k,m,n,o,p,q,r,s,t,u;return!this instanceof f.Runtime?new f.Rutime(a,b,c):(s=this,Object.isString(a)||(c=b,b=a,a=""),t=g.defer(),u={updateOnIntern:!0},Object.assign(u,b),Object.assign(this,{settings:u,ready:t.promise,_context:{meta:{},contexts:{},entities:{},attributes:{}},_instances:{}}),q=function(a){switch(a){case"list":return[];case"object":return{};case"boolean":return!1;case"int":return 0;case"string":return"";default:return""}},r=function(a){return function(b){var c,d,e,f;Object.assign(a._context.attributes,b.attributes||{}),d=b.entities,e=[];for(f in d)c=d[f],c.type=f,e.push(k(c,f));return e}}(this),k=function(a){return function(b,d){return a._context.entities[d]=b,a._instances[d]={},b.Constructor=function(a){var c,d,e,f,g;Object.assign(this,{_new:!0,_modified:{_count:0},_fields:{},_relationships:{},_runtime:s}),a=a||{},a[e=b.key]||(a[e]=h.v4()),g=b.properties;for(d in g)f=g[d],c=a[d]||q(f.type),this[d]=c;return this._id=this.id(!0),this.on("persisted",function(){return this._new=!1,this._modified={_count:0}}),this},b.Constructor.name=d,o(d,b,c&&c[d])}}(this),o=function(){return function(a,b,c){var d,g,h,i,k,l,o,q,r;b.Constructor.prototype=Object.create(Object.assign({},e.prototype,{_type:function(b){return b=b||!1,a},id:function(a){return""+(a?this._type()+"/":"")+this[b.key]},_status:function(){return this._new?"NEW":0===this._modified._count?"PERSISTED":"MODIFIED"},_definition:function(){return b},_persist:function(a,b){var c,d;return c=_.Deferred().then(b),d=!a,a=d?new f.Transaction:a,a.add(this),this.emit("persisting",a),d?a.persist(b):void 0},_encode:function(){var a,c;a={_type:this._type(),_id:this.id()};for(c in b.properties)a[c]=this[c];return a},_destroy:j(function(){var a,c,d;this.emit("destroying",{}),c=b.relationships;for(a in c)d=c[a],"has_many"===d.type?this[a].remove(this):this[a]=null;return s.destroy(this),this[b.key]=0,this.emit("destroyed",{})}),_compare:function(a){return f.EntityComparator(this,a)}})),b.Constructor.prototype.toJSON=b.Constructor.prototype._encode,k=b.properties;for(d in k)i=k[d],n(b,d,i);l=b.relationships;for(q in l)r=l[q],p(b,q,r);o=b.methods;for(h in o)g=o[h],m(b,h,g);return c?Object.assign(b.Constructor.prototype,c.prototype):void 0}}(this),n=function(){return function(a,b){return Object.defineProperty(a.Constructor.prototype,b,{set:function(a){return a!==this._fields[b]?(this._fields[b]=a,this._modified[b]?this._modified[b]===a&&(delete this._modified[b],this._modified._count-=1):(this._modified[b]=this._fields[b],this._modified._count+=1),this.emit("modified",[b,a])):void 0},get:function(){return this._fields[b]}})}}(this),p=function(a,b,c){var e,f,g,i,k,m;return g=function(){return{set:j(function(a){var d,e;if(null===a){if("is_a"!==c.type)try{null!=(d=this._relationships[b])&&d[c.back].remove(this)}catch(f){null!=(e=this._relationships[b])&&(e[c.back]=null)}this._relationships[b]=null,this[c.property]=null}else this._relationships[b]=a,m.call(this,a),"is_a"!==c.type&&c.back&&null!=a&&(a[c.back]=this);return this._modified._count+=1,this.emit("modified",[b,a]),this}),get:function(){var a;return void 0===this._relationships[b]&&(this._relationships[b]=s._instances[c.to.type][this[c.property]],void 0===this._relationships[b]&&(a={},a[c.to.property]=this[c.property],this[b]=s.build(c.to.type,a))),this._relationships[b]}}},e=function(){return{enumerable:!0,configurable:!1,get:function(){var a,e,f;if(!(b in this._relationships)){this._relationships[b]=new d(this,b,c),e=s._instances[c.to.type];for(a in e)f=e[a],f[c.to.property]===this[c.property]&&this._relationships[b].add(f)}return this._relationships[b]},set:function(){var a,c,d,e;for(e=1<=arguments.length?l.call(arguments,0):[],e=e.reduce(function(a,b){return a.concat(b)},[]),this[b],c=0,d=e.length;d>c;c++)a=e[c],this._relationships[b].add(a);return this._modified._count+=1,this.emit("modified",[b,arguments]),this}}},f=function(){return{enumerable:!0,configurable:!1,get:function(){var a,e;return this[e=c.property]||(this[e]=[]),b in this._relationships||(a=this,this._relationships[b]=new d(this,b,c),this[c.property].forEach(function(d){return a._relationships[b].add(s._instances[c.to.type][d])}),this._relationships[b].on(d.ADD,function(b){return a[c.property].push(b.id())}),this._relationships[b].on(d.REMOVE,function(b){var d;return d=a[c.property].indexOf(b.id),a[c.property].splice(d,1)})),this._relationships[b]},set:function(){var a,d,e,f;for(f=1<=arguments.length?l.call(arguments,0):[],f=f.reduce(function(a,b){return a.concat(b)},[]),this[b],d=0,e=f.length;e>d;d++)a=f[d],this._relationships[b].add(a);return this[c.property]=this._relationships[b].map(function(a){return a.id()}),this._modified._count+=1,this.emit("modified",[b,arguments]),this}}},i="has_many"===c.type?"list"===(null!=(k=a.properties[c.property])?k.type:void 0)?f():e():g(),Object.defineProperty(a.Constructor.prototype,b,i),m=function(b){var d;return void 0===b?this[c.property]=void 0:a.key===c.property?b[c.to.property]=this[c.property]:b._definition().key===c.to.property?this[c.property]=b[c.to.property]:this[c.property].match(h.rvalid)?b[c.to.property]=this[c.property]:b[c.to.property].match(h.rvalid)?this[c.property]=b[c.to.property]:(d=h.v4(),this[c.property]=d,b[c.to.property]=d)}},m=function(a,b,c){var d,e,f;return c={definitions:c.definitions||{},order:c.order||[]},d=c.definitions.javascript||"",f=c.order,d&&!d.match(/window/)?(f.push(d),e=Function.apply(null,f)):e=function(){},a.Constructor.prototype[b]=e},this.load=function(a,b){return i.request(a).then(function(a){return r(JSON.parse(a),b),t.resolve()})["catch"](function(a){return console.error("Could not load context"),console.warn(a),console.log(a.stack),t.reject(a)})},b&&b.debug&&(r(b.debug.context,c),t.reject()),a&&this.load(a,c),this)},k=function(a){var b;return b=a._type(),this[b]||(this[b]=[]),this[b].push(a)},f.Runtime.prototype=Object.create(Object.assign({},e,{clear:function(){return this._instances={},this},definition:function(a){return a=("function"==typeof a._type?a._type():void 0)||a,this._context.entities[a]},extend:function(a,b){return this._context.entities[a]&&Object.assign(this._context.entities[a].Constructor.prototype,b.prototype),this},intern:function(a,b){var c,d,e;return null==b&&(b=!1),b=b||this.settings.updateOnIntern,a.length&&!a._type?d=function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(this.intern(c,b));return f}.call(this):(b?(e=this._instances[a._type()][a.id()]||a,Object.assign(e._fields,a._fields)):e=this._instances[a._type()][a.id()]||a,this._instances[a._type()][a.id()]=e,e)},build:function(a,b){var c,d,e,f;if(c=this.definition(a),!c)throw"JEFRi::Runtime::build '"+a+"' is not a defined type in this context.";return b=b||{},f=new c.Constructor(b),c.key in b&&(d={_type:a},d[c.key]=b[c.key],e=this.find(d),e.length>0)?(e=e[0],Object.assign(e._fields,f._fields),e):(this._instances[a][f.id()]=f,f)},expand:function(a,b){var c,d,e,f,g,h,i,j;for(b=b||"persisted",c=[],j=a.entities||[],f=0,h=j.length;h>f;f++)e=j[f],d=this.build(e._type,e),d=this.intern(d,!0),c.push(d);for(g=0,i=c.length;i>g;g++)d=c[g],d.emit(b,!0);return a.entities=c},destroy:function(a){return delete this._instances[a._type()][a.id()],this},find:function(a){var b,c,d,e,f;if("string"==typeof a&&(a={_type:a}),f=[],c=this.definition(a._type),e=this._instances[a._type],a.hasOwnProperty(c.key)||a.hasOwnProperty("_id"))b=a[c.key]||a._id,e[b]&&f.push(e[b]);else for(b in e)d=e[b],f.push(d);return f}}))},function(a,b,d){var e,f;e=d(12),f=function(){function a(a,b){Object.assign(this,{attributes:a&&a.attributes?a.attributes:{},store:b,entities:a instanceof Array?a:a?a.entities?a.entities:[a]:[]})}return a.prototype.encode=function(){var a,b,c,d,f;for(f={attributes:this.attributes,entities:[]},d=this.entities,b=0,c=d.length;c>b;b++)a=d[b],f.entities.push(e.isEntity(a)?a._encode():a);return f},a.prototype.toString=function(){return JSON.stringify(this.encode())},a.prototype.get=function(a){return null==a&&(a=this.store),this.emit("getting",{}),a=a||this.store,a.execute("get",this).then(function(){return resolve(this)})},a.prototype.persist=function(a){return null==a&&(a=this.store),this.emit("persisting",{}),a.execute("persist",this).then(function(a){return function(b){var c,d,e,f;for(f=b.entities,d=0,e=f.length;e>d;d++)c=f[d],c.emit("persisted",{});return a.emit("persisted",{}),resolve(a)}}(this))},a.prototype.add=function(a,b){var c,d,e;for(null==b&&(b=!1),a=Array.isArray(a)?a:[].slice.call(arguments,0),c=0,d=a.length;d>c;c++)e=a[c],this.entities.push(e);return this},a.prototype.attributes=function(a){return Object.assign(this.attributes,c(a)),this},a}(),a.exports=f},function(a,b,c){var d;d=c(20),a.exports=function(a){return""===a?Promise()(!0):d.get(a)},a.exports.get=d.get,a.exports.post=d.post},function(a){a.exports=function(a){var b=new Uint8Array(a);return window.crypto.getRandomValues(b),[].slice.call(b)[0]}},function(a,b,c){var d,e,f,g;g=c(5),e=g.Event,f=c(12),a.exports=d=function(a,b,c){this.entity=a,this.field=b,this.relationship=c},d.ADD="Add",d.REMOVE="Remove",d.prototype=Object.create(Array.prototype),Object.keys(e.prototype).forEach(function(a){return d.prototype[a]=e.prototype[a]}),d.prototype.remove=function(a){var b,c;if(null!==a){for(c=this.length-1;c>=0;){if(this[c]._compare(a)){if(this.relationship.back){b=this[c];try{b[this.relationship.back].remove(this)}catch(e){b[this.relationship.back]=null}}this.splice(c,1)}c--}return this.emit(d.REMOVE,a),this}},d.prototype.add=function(a){var b;return b=null,this.entity._relationships[this.field].forEach(function(c){return null==b&&f.EntityComparator(a,c)?b=c:void 0}),null==b&&(this.entity._relationships[this.field].push(a),this.relationship.back&&(a[this.relationship.back]=this.entity)),this.emit(d.ADD,a),this.entity}},function(a){function b(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(a){return"function"==typeof a}function d(a){return"number"==typeof a}function e(a){return"object"==typeof a&&null!==a}function f(a){return void 0===a}a.exports=b,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._maxListeners=void 0,b.defaultMaxListeners=10,b.prototype.setMaxListeners=function(a){if(!d(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},b.prototype.emit=function(a){var b,d,g,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||e(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(d=this._events[a],f(d))return!1;if(c(d))switch(arguments.length){case 1:d.call(this);break;case 2:d.call(this,arguments[1]);break;case 3:d.call(this,arguments[1],arguments[2]);break;default:for(g=arguments.length,h=new Array(g-1),i=1;g>i;i++)h[i-1]=arguments[i];d.apply(this,h)}else if(e(d)){for(g=arguments.length,h=new Array(g-1),i=1;g>i;i++)h[i-1]=arguments[i];for(j=d.slice(),g=j.length,i=0;g>i;i++)j[i].apply(this,h)}return!0},b.prototype.addListener=function(a,d){var g;if(!c(d))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,c(d.listener)?d.listener:d),this._events[a]?e(this._events[a])?this._events[a].push(d):this._events[a]=[this._events[a],d]:this._events[a]=d,e(this._events[a])&&!this._events[a].warned){var g;g=f(this._maxListeners)?b.defaultMaxListeners:this._maxListeners,g&&g>0&&this._events[a].length>g&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(a,b){function d(){this.removeListener(a,d),e||(e=!0,b.apply(this,arguments))}if(!c(b))throw TypeError("listener must be a function");var e=!1;return d.listener=b,this.on(a,d),this},b.prototype.removeListener=function(a,b){var d,f,g,h;if(!c(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(d=this._events[a],g=d.length,f=-1,d===b||c(d.listener)&&d.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(e(d)){for(h=g;h-->0;)if(d[h]===b||d[h].listener&&d[h].listener===b){f=h;break}if(0>f)return this;1===d.length?(d.length=0,delete this._events[a]):d.splice(f,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},b.prototype.removeAllListeners=function(a){var b,d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(d=this._events[a],c(d))this.removeListener(a,d);else for(;d.length;)this.removeListener(a,d[d.length-1]);return delete this._events[a],this},b.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():[]},b.listenerCount=function(a,b){var d;return d=a._events&&a._events[b]?c(a._events[b])?1:a._events[b].length:0}},function(a,b,c){(function(b){!function(c){function d(a,b){return function(){a.apply(b,arguments)}}function e(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],k(a,d(g,this),d(h,this))}function f(a){var b=this;return null===this._state?void this._deferreds.push(a):void l(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function g(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void k(d(b,a),d(g,this),d(h,this))}this._state=!0,this._value=a,i.call(this)}catch(c){h.call(this,c)}}function h(a){this._state=!1,this._value=a,i.call(this)}function i(){for(var a=0,b=this._deferreds.length;b>a;a++)f.call(this,this._deferreds[a]);this._deferreds=null}function j(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function k(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var l="function"==typeof b&&b||function(a){setTimeout(a,1)},m=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};e.prototype["catch"]=function(a){return this.then(null,a)},e.prototype.then=function(a,b){var c=this;return new e(function(d,e){f.call(c,new j(a,b,d,e))})},e.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&m(arguments[0])?arguments[0]:arguments);return new e(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},e.resolve=function(a){return a&&"object"==typeof a&&a.constructor===e?a:new e(function(b){b(a)})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},e._setImmediateFn=function(a){l=a},"undefined"!=typeof a&&a.exports?a.exports=e:c.Promise||(c.Promise=e)}(this)}).call(b,c(21).setImmediate)},function(a,b,c){var d,e,f=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d=c(10),e=function(a){var b,c,e;return b=window.ActiveXObject||XMLHttpRequest,e=new b("Microsoft.XMLHTTP"),e.open(a.type||(a.data?"POST":"GET"),a.url,!0),f.call(e,"overrideMimeType")>=0&&e.overrideMimeType(a.dataType||"text/plain"),c=new d(function(b,c){return e.onreadystatechange=function(){var d,f;4===e.readyState&&(0===(d=e.status)||200===d?(f=e.responseText,"application/json"===a.dataType&&(f=JSON.parse(f)),b(f)):c(new Error("Could not load "+a.url)))}}),a.data&&e.setRequestHeader("Content-type",a.dataType||"application/x-www-form-urlencoded"),e.send(a.data||null),c},a.exports={get:function(a,b){return b=b||{},b.url=a,b.type="GET",b.data=null,e(b)},post:function(a,b){return b=b||{},b.url=a,b.type="POST",e(b)}}},function(a,b,c){(function(a,d){function e(a,b){this._id=a,this._clearFn=b}var f=c(22).nextTick,g=Function.prototype.apply,h=Array.prototype.slice,i={},j=0;b.setTimeout=function(){return new e(g.call(setTimeout,window,arguments),clearTimeout)},b.setInterval=function(){return new e(g.call(setInterval,window,arguments),clearInterval)},b.clearTimeout=b.clearInterval=function(a){a.close()},e.prototype.unref=e.prototype.ref=function(){},e.prototype.close=function(){this._clearFn.call(window,this._id)},b.enroll=function(a,b){clearTimeout(a._idleTimeoutId),a._idleTimeout=b},b.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},b._unrefActive=b.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;b>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))},b.setImmediate="function"==typeof a?a:function(a){var c=j++,d=arguments.length<2?!1:h.call(arguments,1);return i[c]=!0,f(function(){i[c]&&(d?a.apply(null,d):a.call(null),b.clearImmediate(c))}),c},b.clearImmediate="function"==typeof d?d:function(a){delete i[a]}}).call(b,c(21).setImmediate,c(21).clearImmediate)},function(a){function b(){if(!f){f=!0;for(var a,b=e.length;b;){a=e,e=[];for(var c=-1;++c<b;)a[c]();b=e.length}f=!1}}function c(){}var d=a.exports={},e=[],f=!1;d.nextTick=function(a){e.push(a),f||setTimeout(b,0)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}}]);